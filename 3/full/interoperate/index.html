<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>Data&ampnbsp;Fair - Interop√©rer</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="application" name="application-name" content="DataFair"><meta data-n-head="ssr" data-hid="description" name="description" content="DataFair - Documentation"><base href="/3/"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:300,400,500,700,400italic|Material+Icons"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="favicon.ico"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:100,300,400,500,700,900&display=swap"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css"><style data-n-head="vuetify" type="text/css" id="vuetify-theme-stylesheet" nonce="undefined">.v-application a{color:#1976d2}.v-application .primary{background-color:#1976d2!important;border-color:#1976d2!important}.v-application .primary--text{color:#1976d2!important;caret-color:#1976d2!important}.v-application .primary.lighten-5{background-color:#c7fdff!important;border-color:#c7fdff!important}.v-application .primary--text.text--lighten-5{color:#c7fdff!important;caret-color:#c7fdff!important}.v-application .primary.lighten-4{background-color:#a8e0ff!important;border-color:#a8e0ff!important}.v-application .primary--text.text--lighten-4{color:#a8e0ff!important;caret-color:#a8e0ff!important}.v-application .primary.lighten-3{background-color:#8ac5ff!important;border-color:#8ac5ff!important}.v-application .primary--text.text--lighten-3{color:#8ac5ff!important;caret-color:#8ac5ff!important}.v-application .primary.lighten-2{background-color:#6aaaff!important;border-color:#6aaaff!important}.v-application .primary--text.text--lighten-2{color:#6aaaff!important;caret-color:#6aaaff!important}.v-application .primary.lighten-1{background-color:#488fef!important;border-color:#488fef!important}.v-application .primary--text.text--lighten-1{color:#488fef!important;caret-color:#488fef!important}.v-application .primary.darken-1{background-color:#005eb6!important;border-color:#005eb6!important}.v-application .primary--text.text--darken-1{color:#005eb6!important;caret-color:#005eb6!important}.v-application .primary.darken-2{background-color:#00479b!important;border-color:#00479b!important}.v-application .primary--text.text--darken-2{color:#00479b!important;caret-color:#00479b!important}.v-application .primary.darken-3{background-color:#003180!important;border-color:#003180!important}.v-application .primary--text.text--darken-3{color:#003180!important;caret-color:#003180!important}.v-application .primary.darken-4{background-color:#001e67!important;border-color:#001e67!important}.v-application .primary--text.text--darken-4{color:#001e67!important;caret-color:#001e67!important}.v-application .secondary{background-color:#424242!important;border-color:#424242!important}.v-application .secondary--text{color:#424242!important;caret-color:#424242!important}.v-application .secondary.lighten-5{background-color:#c1c1c1!important;border-color:#c1c1c1!important}.v-application .secondary--text.text--lighten-5{color:#c1c1c1!important;caret-color:#c1c1c1!important}.v-application .secondary.lighten-4{background-color:#a6a6a6!important;border-color:#a6a6a6!important}.v-application .secondary--text.text--lighten-4{color:#a6a6a6!important;caret-color:#a6a6a6!important}.v-application .secondary.lighten-3{background-color:#8b8b8b!important;border-color:#8b8b8b!important}.v-application .secondary--text.text--lighten-3{color:#8b8b8b!important;caret-color:#8b8b8b!important}.v-application .secondary.lighten-2{background-color:#727272!important;border-color:#727272!important}.v-application .secondary--text.text--lighten-2{color:#727272!important;caret-color:#727272!important}.v-application .secondary.lighten-1{background-color:#595959!important;border-color:#595959!important}.v-application .secondary--text.text--lighten-1{color:#595959!important;caret-color:#595959!important}.v-application .secondary.darken-1{background-color:#2c2c2c!important;border-color:#2c2c2c!important}.v-application .secondary--text.text--darken-1{color:#2c2c2c!important;caret-color:#2c2c2c!important}.v-application .secondary.darken-2{background-color:#171717!important;border-color:#171717!important}.v-application .secondary--text.text--darken-2{color:#171717!important;caret-color:#171717!important}.v-application .secondary.darken-3{background-color:#000!important;border-color:#000!important}.v-application .secondary--text.text--darken-3{color:#000!important;caret-color:#000!important}.v-application .secondary.darken-4{background-color:#000!important;border-color:#000!important}.v-application .secondary--text.text--darken-4{color:#000!important;caret-color:#000!important}.v-application .accent{background-color:#82b1ff!important;border-color:#82b1ff!important}.v-application .accent--text{color:#82b1ff!important;caret-color:#82b1ff!important}.v-application .accent.lighten-5{background-color:#fff!important;border-color:#fff!important}.v-application .accent--text.text--lighten-5{color:#fff!important;caret-color:#fff!important}.v-application .accent.lighten-4{background-color:#f8ffff!important;border-color:#f8ffff!important}.v-application .accent--text.text--lighten-4{color:#f8ffff!important;caret-color:#f8ffff!important}.v-application .accent.lighten-3{background-color:#daffff!important;border-color:#daffff!important}.v-application .accent--text.text--lighten-3{color:#daffff!important;caret-color:#daffff!important}.v-application .accent.lighten-2{background-color:#bce8ff!important;border-color:#bce8ff!important}.v-application .accent--text.text--lighten-2{color:#bce8ff!important;caret-color:#bce8ff!important}.v-application .accent.lighten-1{background-color:#9fccff!important;border-color:#9fccff!important}.v-application .accent--text.text--lighten-1{color:#9fccff!important;caret-color:#9fccff!important}.v-application .accent.darken-1{background-color:#6596e2!important;border-color:#6596e2!important}.v-application .accent--text.text--darken-1{color:#6596e2!important;caret-color:#6596e2!important}.v-application .accent.darken-2{background-color:#467dc6!important;border-color:#467dc6!important}.v-application .accent--text.text--darken-2{color:#467dc6!important;caret-color:#467dc6!important}.v-application .accent.darken-3{background-color:#2364aa!important;border-color:#2364aa!important}.v-application .accent--text.text--darken-3{color:#2364aa!important;caret-color:#2364aa!important}.v-application .accent.darken-4{background-color:#004c90!important;border-color:#004c90!important}.v-application .accent--text.text--darken-4{color:#004c90!important;caret-color:#004c90!important}.v-application .error{background-color:#ff5252!important;border-color:#ff5252!important}.v-application .error--text{color:#ff5252!important;caret-color:#ff5252!important}.v-application .error.lighten-5{background-color:#ffe4d5!important;border-color:#ffe4d5!important}.v-application .error--text.text--lighten-5{color:#ffe4d5!important;caret-color:#ffe4d5!important}.v-application .error.lighten-4{background-color:#ffc6b9!important;border-color:#ffc6b9!important}.v-application .error--text.text--lighten-4{color:#ffc6b9!important;caret-color:#ffc6b9!important}.v-application .error.lighten-3{background-color:#ffa99e!important;border-color:#ffa99e!important}.v-application .error--text.text--lighten-3{color:#ffa99e!important;caret-color:#ffa99e!important}.v-application .error.lighten-2{background-color:#ff8c84!important;border-color:#ff8c84!important}.v-application .error--text.text--lighten-2{color:#ff8c84!important;caret-color:#ff8c84!important}.v-application .error.lighten-1{background-color:#ff6f6a!important;border-color:#ff6f6a!important}.v-application .error--text.text--lighten-1{color:#ff6f6a!important;caret-color:#ff6f6a!important}.v-application .error.darken-1{background-color:#df323b!important;border-color:#df323b!important}.v-application .error--text.text--darken-1{color:#df323b!important;caret-color:#df323b!important}.v-application .error.darken-2{background-color:#bf0025!important;border-color:#bf0025!important}.v-application .error--text.text--darken-2{color:#bf0025!important;caret-color:#bf0025!important}.v-application .error.darken-3{background-color:#9f0010!important;border-color:#9f0010!important}.v-application .error--text.text--darken-3{color:#9f0010!important;caret-color:#9f0010!important}.v-application .error.darken-4{background-color:maroon!important;border-color:maroon!important}.v-application .error--text.text--darken-4{color:maroon!important;caret-color:maroon!important}.v-application .info{background-color:#2196f3!important;border-color:#2196f3!important}.v-application .info--text{color:#2196f3!important;caret-color:#2196f3!important}.v-application .info.lighten-5{background-color:#d4ffff!important;border-color:#d4ffff!important}.v-application .info--text.text--lighten-5{color:#d4ffff!important;caret-color:#d4ffff!important}.v-application .info.lighten-4{background-color:#b5ffff!important;border-color:#b5ffff!important}.v-application .info--text.text--lighten-4{color:#b5ffff!important;caret-color:#b5ffff!important}.v-application .info.lighten-3{background-color:#95e8ff!important;border-color:#95e8ff!important}.v-application .info--text.text--lighten-3{color:#95e8ff!important;caret-color:#95e8ff!important}.v-application .info.lighten-2{background-color:#75ccff!important;border-color:#75ccff!important}.v-application .info--text.text--lighten-2{color:#75ccff!important;caret-color:#75ccff!important}.v-application .info.lighten-1{background-color:#51b0ff!important;border-color:#51b0ff!important}.v-application .info--text.text--lighten-1{color:#51b0ff!important;caret-color:#51b0ff!important}.v-application .info.darken-1{background-color:#007cd6!important;border-color:#007cd6!important}.v-application .info--text.text--darken-1{color:#007cd6!important;caret-color:#007cd6!important}.v-application .info.darken-2{background-color:#0064ba!important;border-color:#0064ba!important}.v-application .info--text.text--darken-2{color:#0064ba!important;caret-color:#0064ba!important}.v-application .info.darken-3{background-color:#004d9f!important;border-color:#004d9f!important}.v-application .info--text.text--darken-3{color:#004d9f!important;caret-color:#004d9f!important}.v-application .info.darken-4{background-color:#003784!important;border-color:#003784!important}.v-application .info--text.text--darken-4{color:#003784!important;caret-color:#003784!important}.v-application .success{background-color:#4caf50!important;border-color:#4caf50!important}.v-application .success--text{color:#4caf50!important;caret-color:#4caf50!important}.v-application .success.lighten-5{background-color:#dcffd6!important;border-color:#dcffd6!important}.v-application .success--text.text--lighten-5{color:#dcffd6!important;caret-color:#dcffd6!important}.v-application .success.lighten-4{background-color:#beffba!important;border-color:#beffba!important}.v-application .success--text.text--lighten-4{color:#beffba!important;caret-color:#beffba!important}.v-application .success.lighten-3{background-color:#a2ff9e!important;border-color:#a2ff9e!important}.v-application .success--text.text--lighten-3{color:#a2ff9e!important;caret-color:#a2ff9e!important}.v-application .success.lighten-2{background-color:#85e783!important;border-color:#85e783!important}.v-application .success--text.text--lighten-2{color:#85e783!important;caret-color:#85e783!important}.v-application .success.lighten-1{background-color:#69cb69!important;border-color:#69cb69!important}.v-application .success--text.text--lighten-1{color:#69cb69!important;caret-color:#69cb69!important}.v-application .success.darken-1{background-color:#2d9437!important;border-color:#2d9437!important}.v-application .success--text.text--darken-1{color:#2d9437!important;caret-color:#2d9437!important}.v-application .success.darken-2{background-color:#00791e!important;border-color:#00791e!important}.v-application .success--text.text--darken-2{color:#00791e!important;caret-color:#00791e!important}.v-application .success.darken-3{background-color:#006000!important;border-color:#006000!important}.v-application .success--text.text--darken-3{color:#006000!important;caret-color:#006000!important}.v-application .success.darken-4{background-color:#004700!important;border-color:#004700!important}.v-application .success--text.text--darken-4{color:#004700!important;caret-color:#004700!important}.v-application .warning{background-color:#fb8c00!important;border-color:#fb8c00!important}.v-application .warning--text{color:#fb8c00!important;caret-color:#fb8c00!important}.v-application .warning.lighten-5{background-color:#ffff9e!important;border-color:#ffff9e!important}.v-application .warning--text.text--lighten-5{color:#ffff9e!important;caret-color:#ffff9e!important}.v-application .warning.lighten-4{background-color:#fffb82!important;border-color:#fffb82!important}.v-application .warning--text.text--lighten-4{color:#fffb82!important;caret-color:#fffb82!important}.v-application .warning.lighten-3{background-color:#ffdf67!important;border-color:#ffdf67!important}.v-application .warning--text.text--lighten-3{color:#ffdf67!important;caret-color:#ffdf67!important}.v-application .warning.lighten-2{background-color:#ffc24b!important;border-color:#ffc24b!important}.v-application .warning--text.text--lighten-2{color:#ffc24b!important;caret-color:#ffc24b!important}.v-application .warning.lighten-1{background-color:#ffa72d!important;border-color:#ffa72d!important}.v-application .warning--text.text--lighten-1{color:#ffa72d!important;caret-color:#ffa72d!important}.v-application .warning.darken-1{background-color:#db7200!important;border-color:#db7200!important}.v-application .warning--text.text--darken-1{color:#db7200!important;caret-color:#db7200!important}.v-application .warning.darken-2{background-color:#bb5900!important;border-color:#bb5900!important}.v-application .warning--text.text--darken-2{color:#bb5900!important;caret-color:#bb5900!important}.v-application .warning.darken-3{background-color:#9d4000!important;border-color:#9d4000!important}.v-application .warning--text.text--darken-3{color:#9d4000!important;caret-color:#9d4000!important}.v-application .warning.darken-4{background-color:#802700!important;border-color:#802700!important}.v-application .warning--text.text--darken-4{color:#802700!important;caret-color:#802700!important}</style><link rel="preload" href="/3/_nuxt/0735146.js" as="script"><link rel="preload" href="/3/_nuxt/40ca7f6.js" as="script"><link rel="preload" href="/3/_nuxt/css/5c37d71.css" as="style"><link rel="preload" href="/3/_nuxt/388ecef.js" as="script"><link rel="preload" href="/3/_nuxt/css/5c9a69b.css" as="style"><link rel="preload" href="/3/_nuxt/7af1f5b.js" as="script"><link rel="preload" href="/3/_nuxt/css/7b55f21.css" as="style"><link rel="preload" href="/3/_nuxt/7916fea.js" as="script"><link rel="preload" href="/3/_nuxt/css/8604506.css" as="style"><link rel="preload" href="/3/_nuxt/e5bffbd.js" as="script"><link rel="stylesheet" href="/3/_nuxt/css/5c37d71.css"><link rel="stylesheet" href="/3/_nuxt/css/5c9a69b.css"><link rel="stylesheet" href="/3/_nuxt/css/7b55f21.css"><link rel="stylesheet" href="/3/_nuxt/css/8604506.css"><link rel="preload" href="/3/_nuxt/static/1688049601/full/interoperate/state.js" as="script"><link rel="preload" href="/3/_nuxt/static/1688049601/full/interoperate/payload.js" as="script"><link rel="preload" href="/3/_nuxt/static/1688049601/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div data-app="true" id="app" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><main class="v-main" style="padding-top:0;padding-right:0;padding-bottom:0;padding-left:0"><div class="v-main__wrap"><div class="full-chapter"><div class="mt-6 pt-6 text-center col"><div class="v-image v-responsive my-6 theme--light" style="height:160px"><div class="v-image__image v-image__image--preload v-image__image--contain" style="background-position:center center"></div><div class="v-responsive__content"></div></div> <h1 class="text-h3 grey--text text--darken-3">
      Data¬†Fair
    </h1> <h4>
      Version 3.69.0
    </h4> <h1 class="text-h3 grey--text text--darken-3" style="margin-top:200px">Interop√©rer</h1> <h4 style="margin-top:200px!important">
      29 juin 2023<br></h4></div> <div class="page-break"></div> <div class="row mt-4 justify-center"><div><h2 class="text-h4 my-4 grey--text text--darken-3">Table des mati√®res</h2> <h4><a href="#api">1 - API Data&ampnbsp;Fair</a> <!----></h4><h4><a href="#applications">2 - Applications de visualisation</a> <!----></h4><h4><a href="#services">3 - Services externes</a> <!----></h4><h4><a href="#collectors">3 - Collecteurs de donn√©es</a> <!----></h4></div></div> <div class="page-break"></div> <h2 id="api" class="text-h4 mt-6 mb-4 grey--text text--darken-3 section-title">
      1 - API Data&ampnbsp;Fair
      <!----></h2> <div class="container doc-page px-0"><div class="hidden-breadcrumb section-title">
    
  </div> <div class="row"><div class="col"><!----> <!----> <!----> <!----> <div cols="12" style="display:none"><p>Data¬†Fair expose une API Rest compl√®te. Une partie de cette API est essentiellement √† destination des applications et autres r√©utilisations des jeux de donn√©es. Une autre partie concerne principalement les producteurs de contenu qui souhaitent automatiser leur processus. Dans cette page nous proposons un aper√ßu de quelques m√©thodes de publication de contenu. Les exemples ci-dessous ne montrent qu'un √©chantillon des capacit√©s de l'API Data¬†Fair et ne remplacent pas la documentation interactive bien plus compl√®te embarqu√©e dans le service.</p>
<h2 id="pr√©-requis">Pr√©-requis</h2>
<ul>
<li>Une installation op√©rationnelle de Data FAIR, soit locale, soit publique comme sur <a href="https://koumoul.com/data-fair">koumoul.com</a></li>
<li>Un compte et une cl√© d'API avec la port√©e "Gestion des jeux de donn√©es" (voir vos param√®tres personnels ou d'organisation dans le menu en haut √† droite)</li>
<li><a href="https://curl.haxx.se/">curl</a> ou autre client HTTP √† condition d'adapter les exemples</li>
</ul>
<p>D√©finissez une variable contenant votre cl√© d'API :</p>
<pre><code class="language-sh">export API_KEY="XXXX"
</code></pre>
<p>D√©finissez une variable contenant l'URL de base de votre instance Data¬†Fair :</p>
<pre><code class="language-sh">export Data&ampnbsp;Fair_URL="https://koumoul.com/data-fair"
export Data&ampnbsp;Fair_URL="http://localhost/data-fair"
</code></pre>
<h2 id="jeu-de-donn√©es-simple-bas√©-fichier">Jeu de donn√©es simple bas√© fichier</h2>
<p>T√©l√©chargez un fichier CSV d'exemple :</p>
<pre><code class="language-sh">curl https://raw.githubusercontent.com/data-fair/data-fair/master/test/resources/dataset1.csv -o dataset1.csv
</code></pre>
<p>Cr√©ez un jeu de donn√©es simple √† partir de ce fichier avec une requ√™te HTTP multipart :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" --form file=@dataset1.csv $Data&ampnbsp;Fair_URL/api/v1/datasets
</code></pre>
<p>Notez dans le retour que le jeu de donn√©es cr√©√© s'est vu attribu√© un identifiant "id" que vous pouvez conserver pour effectuer des op√©rations ult√©rieures sur ce jeu de donn√©es.</p>
<pre><code class="language-sh">export DATASET_ID=identifiant que vous venez de recevoir
</code></pre>
<p>L'attribut "status" est √† "loaded". Notez que les traitements sur le jeu de donn√©es sont ex√©cut√©s de mani√®re asynchrone, quelques secondes plus tard le statut devrait devenir "finalized" en passant par des √©tapes interm√©diaires. Pour v√©rifier cela vous pouvez faire un GET sur le jeu de donn√©es :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" $Data&ampnbsp;Fair_URL/api/v1/datasets/$DATASET_ID
</code></pre>
<p>L'attribut page est lui aussi int√©ressant, il vous permet de naviguer dans un navigateur directement sur la page de description du jeu de donn√©es. Pour conna√Ætre l'√©tendue des capacit√©s de requ√™tage sur ce jeu de donn√©es vous pouvez vous rendre sur l'onglet API depuis cette page. Voici un exemple basique :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" $Data&ampnbsp;Fair_URL/api/v1/datasets/$DATASET_ID/lines
</code></pre>
<h2 id="jeu-de-donn√©es-bas√©-fichier-avec-pi√®ces-jointes">Jeu de donn√©es bas√© fichier avec pi√®ces jointes</h2>
<p>T√©l√©chargez un fichier CSV d'exemple qui contient une colonne de chemins vers des pi√®ces jointes :</p>
<pre><code class="language-sh">curl https://raw.githubusercontent.com/data-fair/data-fair/master/test/resources/dataset-attachments.csv -o dataset-attachments.csv
</code></pre>
<p>T√©l√©chargez l'archive contenant les pi√®ces jointes correspondantes :</p>
<pre><code class="language-sh">curl https://raw.githubusercontent.com/data-fair/data-fair/master/test/resources/files.zip -o files.zip
</code></pre>
<p>Cr√©ez un jeu de donn√©es bas√© sur le CSV et enrichi avec les pi√®ces jointes de l'archive gr√¢ce √† cette requ√™te HTTP multipart :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" --form file=@dataset-attachments.csv --form attachments=@files.zip $Data&ampnbsp;Fair_URL/api/v1/datasets
export DATASET_ID=identifiant que vous venez de recevoir
</code></pre>
<p>Si vous visitez la page de ce jeu de donn√©es vous verrez un onglet "Fichiers" suppl√©mentaire qui permet de lister les pi√®ces jointes et d'effectuer des recherches dans leur contenu. En effectuant une requ√™te basique sur le jeu de donn√©es vous pouvez constater l'ajout de champs _file.* qui sont issus de l'analyse du contenu des pi√®ces jointes.</p>
<h2 id="jeu-de-donn√©es-√©ditable">Jeu de donn√©es √©ditable</h2>
<p>Cr√©ez un jeu de donn√©es √©ditable vide avec un sch√©ma minimaliste. Notez l'attribut "isRest" qui est la condition pour cr√©er ce type de jeu de donn√©es :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" --header "Content-Type: application/json" $Data&ampnbsp;Fair_URL/api/v1/datasets --data '{
  "isRest": true,
  "title": "rest1",
  "schema": [{ "key": "attr1", "type": "string" }, { "key": "attr2", "type": "string" }]
}'
export DATASET_ID=identifiant que vous venez de recevoir
</code></pre>
<p>Ajouter une ligne de donn√©e :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" --header "Content-Type: application/json" $Data&ampnbsp;Fair_URL/api/v1/datasets/$DATASET_ID/lines --data '{
  "_id": "ligne1",
  "attr1": "attr1 ligne1",
  "attr2": "attr2 ligne1"
}'
</code></pre>
<p>Ajoutez/modifiez plusieurs lignes de donn√©e :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" --header "Content-Type: application/json" $Data&ampnbsp;Fair_URL/api/v1/datasets/$DATASET_ID/_bulk_lines --data '[
  { "_id": "ligne1", "_action": "patch", "attr1": "attr1 ligne1 autre valeur"},
  { "_id": "ligne2", "attr1": "attr1 ligne2", "attr2": "attr2 ligne2"}
]'
</code></pre>
<p>V√©rifiez la donn√©e :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" $Data&ampnbsp;Fair_URL/api/v1/datasets/$DATASET_ID/lines
</code></pre>
<h2 id="jeu-de-donn√©es-√©ditable-avec-pi√®ces-jointes">Jeu de donn√©es √©ditable avec pi√®ces jointes</h2>
<p>Cr√©ez un jeu de donn√©es √©ditable vide avec un sch√©ma qui contient un champ type <em>pi√®ces jointes</em> :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" --header "Content-Type: application/json" $Data&ampnbsp;Fair_URL/api/v1/datasets --data '{
  "isRest": true,
  "title": "rest1",
  "schema": [
    { "key": "attr1", "type": "string" },
    { "key": "attachmentPath", "type": "string", "x-refersTo": "http://schema.org/DigitalDocument" }
  ]
}'
export DATASET_ID=identifiant que vous venez de recevoir
</code></pre>
<p>Ajoutez plusieurs lignes de donn√©es avec pi√®ces jointes dans une archive :</p>
<pre><code class="language-sh">echo '[
  { "_id": "line1", "attr1": "test1", "attachmentPath": "test.odt" },
  { "_id": "line2", "attr1": "test1", "attachmentPath": "dir1/test.pdf" }
]' > actions.json
curl -v --header "x-apiKey: $API_KEY" $Data&ampnbsp;Fair_URL/api/v1/datasets/$DATASET_ID/_bulk_lines --form attachments=@files.zip --form actions=@actions.json
</code></pre>
<p>V√©rifiez la donn√©e :</p>
<pre><code class="language-sh">curl -v --header "x-apiKey: $API_KEY" $Data&ampnbsp;Fair_URL/api/v1/datasets/$DATASET_ID/lines
</code></pre>
</div></div></div></div><div class="page-break"></div> <h2 id="applications" class="text-h4 mt-6 mb-4 grey--text text--darken-3 section-title">
      2 - Applications de visualisation
      <!----></h2> <div class="container doc-page px-0"><div class="hidden-breadcrumb section-title">
    
  </div> <div class="row"><div class="col"><!----> <!----> <!----> <!----> <div cols="12" style="display:none"><p>N'importe qui peut d√©velopper une nouvelle application de visualisation de donn√©es compatible avec Data¬†Fair. Ces applications sont mises √† disposition sous forme de services : ce sont des applications Web disponibles en ligne. Une instance de Data¬†Fair fait office de proxy vers les applications configur√©es et les r√©expose en leur communiquant les informations de contexte dont elles ont besoin. Pour pouvoir √™tre int√©gr√©e dans une instance Data¬†Fair, une application doit exposer certaines informations.</p>
<h2 id="exemples">Exemples</h2>
<ul>
<li>Un plugin pour <a href="https://cli.vuejs.org/">vue-cli</a> qui permet de g√©n√©rer une application : <a href="https://github.com/data-fair/vue-cli-plugin-app">vue-cli-plugin-app</a></li>
<li>Une application statique minimaliste en HTML/JS/CSS pur avec juste un petit peu de jQuery : <a href="https://github.com/data-fair/app-minimal">app-minimal</a></li>
<li>Une application compl√®te d√©velopp√©e avec des frameworks modernes : <a href="https://github.com/data-fair/app-charts">app-charts</a></li>
</ul>
<h2 id="m√©tadonn√©es-essentielles">M√©tadonn√©es essentielles</h2>
<p>Une application expose un fichier HTML, typiquement un fichier <code>√¨ndex.html</code> √† sa racine. Ce fichier doit contenir certaines informations, renseign√©es dans des balises de la section HEAD :</p>
<ul>
<li><strong>title</strong> : Le titre de l'application, dans une balise title.</li>
<li><strong>description</strong> : La description de l'application, dans une balise meta.</li>
</ul>
<h2 id="gestion-des-configurations">Gestion des configurations</h2>
<p>Une application doit donner √† Data¬†Fair le moyen de cr√©er et √©diter des configurations coh√©rentes avec ses besoins. Les configurations sont d√©crites √† l'aide de JSON sch√©ma, en servant √† la racine de l'application un fichier <code>config-schema.json</code>. Ce fichier peut avoir des annotations particuli√®res qui permettent d'avoir du contr√¥le sur le formulaire de configuration qui sera g√©n√©r√©.</p>
<p>Ce formulaire est g√©n√©r√© √† l'aide de la librairie <a href="https://github.com/koumoul-dev/vuetify-jsonschema-form/">vuetify-jsonschema-form</a> (v-jsf), la documentation des diff√©rente annotations JSON sch√©ma utilis√©e est <a href="https://koumoul-dev.github.io/vuetify-jsonschema-form/latest/">disponible ici</a>.</p>
<h2 id="informations-de-contexte">Informations de contexte</h2>
<h3 id="c√¥t√©-client">C√¥t√© client</h3>
<p>Par simplicit√© nous privil√©gions des applications statiques d√©ployables sur un simple serveur Web comme nos applications exemples. Pour ces applications nous avons pr√©vu un m√©canisme simple de transmission des informations contextuelles.</p>
<p>Le proxy Data¬†Fair cherche dans le contenu HTML qui transite la cha√Æne de caract√®re %APPLICATION% et la remplace par la configuration d'application compl√®te au format JSON. Le code Javascript peut donc r√©cup√©rer cet objet et l'utiliser pour effectuer un rendu adapt√© et consommer l'API de Data FAIR en cons√©quence. L'objet JSON transmis contient les champs suivants :</p>
<ul>
<li><strong>title</strong>: Titre de la visualisation configur√©e</li>
<li><strong>url</strong>: URL ou est expos√©e l'application utilis√©e pour la configuration</li>
<li><strong>id</strong>: Identifiant de la visualisation</li>
<li><strong>status</strong>: Etat de la configuration (brouillon, publi√©, ...)</li>
<li><strong>configuration</strong>: La structure de cet objet d√©pend du sch√©ma de configuration de l'application utilis√©e</li>
<li><strong>href</strong>: Point d'acc√®s de l'API Data¬†Fair permettant de lire / modifier la configuration d'application</li>
<li><strong>page</strong>: Page qui pr√©sente la visualisation</li>
<li><strong>exposedUrl</strong>: URL d'exposition de la visualisation, peut √™tre utilis√©e dans une iFrame ou en acc√®s direct</li>
<li><strong>apiUrl</strong>: URL de l'API Data¬†Fair</li>
<li><strong>captureUrl</strong>: URL vers le service de capture, permet de r√©aliser des exports image ou impressions PDF</li>
<li><strong>wsUrl</strong>: URL de la web socket Data¬†Fair, utile pour les applications qui manipulent des donn√©es mise a jour en temps r√©el</li>
</ul>
<h3 id="c√¥t√©-serveur">C√¥t√© serveur</h3>
<p>Il est aussi possible de d√©velopper une application avec rendu c√¥t√© serveur. Dans ce cas le mode de transmission des informations contextuelles est diff√©rent.</p>
<p>Ces informations sont transmises √† l'aide de headers HTTP que le serveur de l'application interpr√®te. Les headers suivant sont transmis par le service :</p>
<ul>
<li><strong>X-Exposed-Url</strong> : URL d'exposition de la visualisation, peut √™tre utilis√©e dans une iFrame ou en acc√®s direct</li>
<li><strong>X-Application-Url</strong> : URL √† utiliser pour conna√Ætre le propri√©taire de l'application, les droits de l'utilisateur courant (pour par exemple masquer / afficher un bouton de configuration).</li>
<li><strong>X-API-Url</strong> : URL de l'API de c, ce qui permet ensuite d'acc√©der aux services distants et aux datasets</li>
<li><strong>X-Directory-Url</strong>: URL vers le service de gestion des utilisateurs.</li>
</ul>
<h2 id="outils-de-d√©veloppement">Outils de d√©veloppement</h2>
<h3 id="serveur-de-d√©veloppement-datafair">Serveur de d√©veloppement Data¬†Fair</h3>
<p>Le projet <a href="https://github.com/data-fair/dev-server">df-dev-server</a> permet de simplifier le d√©veloppement des applications Data¬†Fair.</p>
<ul>
<li>Il est plus l√©ger que Data¬†Fair car il n'a pas besoin des diff√©rents services en local (bases de donn√©es, gestion utilisateurs, ...)</li>
<li>Il permet d'avoir d√©j√† des donn√©es de disponible en se connectant √† des sources distantes</li>
<li>Il est plus facile a faire fonctionner sous Windows, car ne n√©cessite pas Docker</li>
<li>Il n√©cessite par contre une connexion internet pour pouvoir acc√©der aux donn√©es</li>
</ul>
</div></div></div></div><div class="page-break"></div> <h2 id="services" class="text-h4 mt-6 mb-4 grey--text text--darken-3 section-title">
      3 - Services externes
      <!----></h2> <div class="container doc-page px-0"><div class="hidden-breadcrumb section-title">
    
  </div> <div class="row"><div class="col"><!----> <!----> <!----> <!----> <div cols="12" style="display:none"><p>Une API peut √™tre utlis√©e par ce service si elle respecte certains crit√®res. Elle doit √™tre d√©crite avec un certain formalisme : sp√©cification OpenAPI 3.0, annotations s√©mantiques particuli√®res et m√©canisme d'identification de l'API.</p>
<h2 id="sp√©cification-openapi-30">Sp√©cification OpenAPI 3.0</h2>
<p>Le sch√©ma utilis√© pour d√©crire une API est celui de la <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md">sp√©cification OpenAPI 3.0</a>. Le format √† utiliser est JSON (YAML sera support√© prochainement). Les autres formats ne sont pas support√©s, en particulier le format Swagger 2.0. Si votre API est d√©crite dans un autre format, <a href="https://github.com/Mermade/awesome-openapi3">certains outils</a> permettent de la convertir dans le format OpenAPI 3.0.</p>
<p>N√©amoins, une description en pur OpenAPI 3.0 est insuffisante et il faut renseigner des informations compl√©mentaires, notamment pour identifier l'API plus facilement et la s√©mantiser. Ces informations sont ajout√©es en utilisant le format d'extensions autoris√© par la sp√©cification est les attributs suppl√©mentaires sont de la forme <em>x-PropertyName</em>.</p>
<h2 id="identification-de-lapi">Identification de l'API</h2>
<p>La sp√©cification OpenAPI 3.0 n'offre pas de m√©canisme permettant d'identifier de mani√®re unique un API. Cela pose diff√©rents probl√®mes :</p>
<ul>
<li>Il est difficile de suivre l'√©volution de l'API, on ne sait pas si 2 descriptions similaires correspondent √† 2 APIs diff√©rentes ou a 2 versions diff√©rentes d'une m√™me API.</li>
<li>Certaines applications n√©cessitent des fonctionnalit√©s particuli√®res d'API qu'il est difficile de d√©crire s√©mantiquement. Une identification unique de l'API permet au moins de dire que les applications ont besoin de cette API (et plus pr√©cis√©ment d'une version minimale) en particulier.</li>
</ul>
<p>Pour identifier de mani√®re unique une API, nous avons choisi d'adopter <a href="https://github.com/zalando/restful-api-guidelines/blob/master/chapters/compatibility.adoc">ces recommandations</a> : il faut renseigner un attribut <code>x-api-id</code> dans le bloc <code>√¨nfo</code>. Plus pr√©cis√©ment, il doit avoir cette forme :</p>
<pre><code class="language-yaml">/info/x-api-id:
  type: string
  format: urn
  pattern: ^[a-z0-9][a-z0-9-:.]{6,62}[a-z0-9]$
  description: |
    Globally unique and immutable ID required to identify the API. The API
    identifier allows to reveal the history and evolution of an API as a
    sequence of API specifications. It enables validation tools to detect
    incompatible changes and incorrect semantic versions.
</code></pre>
<h2 id="annotations-s√©mantiques">Annotations s√©mantiques</h2>
<p>Les annotations s√©mantiques permettent de pr√©ciser ce que font les diff√©rentes op√©rations d'une API. On peut d'une part typer plus pr√©cis√©ment les donn√©es en entr√©e et en sortie en utilisant des ontologies (par exemple un code postal est plus pr√©cis qu'un entier) et d'autre part d√©terminer une plus grande diversit√© d'actions que les verbes HTTP qui sont tr√®s restreints.</p>
<p>Le format d'annotations s√©mantiques que nous avons choisi est d√©crit dans <a href="http://www.intelligence.tuc.gr/~petrakis/publications/SOAS4.pdf">cet article</a>. <em>x-operationType</em> permet de sp√©cifier plus pr√©cis√©ment l'action r√©alis√©e par l'op√©ration. Nous conseillons d'utiliser le vocabulaire <a href="http://schema.org/Action">d√©fini ici</a> dans les types sp√©cifiques. Pour pouvoir √™tre utilis√© pour de l'enrichissement, un endpoint doit utiliser l'action <em>Search</em>. <em>x-refersTo</em> permet de typer les entr√©es et sorties avec des ontologies. Le vocabulaire √† utiliser est d√©crit dans ce projet, dans le fichier <code>contract/vocabulary.json</code>.</p>
</div></div></div></div><div class="page-break"></div> <h2 id="collectors" class="text-h4 mt-6 mb-4 grey--text text--darken-3 section-title">
      3 - Collecteurs de donn√©es
      <!----></h2> <div class="container doc-page px-0"><div class="hidden-breadcrumb section-title">
    
  </div> <div class="row"><div class="col"><!----> <!----> <!----> <!----> <div cols="12" style="display:none"><p>Les collecteurs de donn√©es p√©riodiques permettent de mettre √† jour certains jeux de donn√©es sp√©cifiques de mani√®re automatis√©e. Il y a principalement 2 cas d'usage, mais on peut en imaginer d'autres :</p>
<ul>
<li>Mise √† jour de jeux de donn√©es aliment√©s par des fichiers produits par d'autres traitement automatis√©s. Typiquement des traitements r√©alis√©s par des ETL avec en sortie des fichiers tabulaires ou cartographiques mis √† disposition sur un espace d'√©change (serveur HTTP ou FTP).</li>
<li>Mise √† jour de donn√©es temps r√©el aliment√©s par des flux de donn√©es ayant des formats sp√©cifiques. Cela concerne principalement des donn√©es IOT.</li>
</ul>
<p> La collecte de donn√©es est assur√©e par le service open source <a href="https://github.com/data-fair-processings">Data¬†Fair Processings</a>. Lorsque l'on souhaite collecter des donn√©es dans un nouveau format ou protocole d'√©change, il faut d√©velopper un nouveau plugin. On peut distinguer 2 cas de figure. Soit la mise √† disposition des donn√©es correspond √† un standard qui n'est pas encore support√©, et dans ce cas le plugin peut √™tre int√©gr√© directement dans Data¬†Fair Processings via une merge request. Soit le plugin reste propri√©taire ou correspond √† un format/protocole trop sp√©cifique pour √™tre int√©gr√© directement dans le projet, et il est rajout√© par configuration, lors de l'installation du service.</p>
</div></div></div></div></div></div></main></div></div></div></div><script defer src="/3/_nuxt/static/1688049601/full/interoperate/state.js"></script><script src="/3/_nuxt/0735146.js" defer></script><script src="/3/_nuxt/7916fea.js" defer></script><script src="/3/_nuxt/e5bffbd.js" defer></script><script src="/3/_nuxt/40ca7f6.js" defer></script><script src="/3/_nuxt/388ecef.js" defer></script><script src="/3/_nuxt/7af1f5b.js" defer></script>
  </body>
</html>
